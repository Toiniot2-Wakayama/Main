<!DOCTYPE html>
<html lang="ja">
    <head>
        <meta charset="UTF-8">
        <meta name = "viewport" content = "width = device-width, initial-scale = 1.0, user-scalable = no">
        <title>定数のススメ。 | TOINIOT²</title>

        <link rel = "stylesheet" href = "https://unpkg.com/ress/dist/ress.min.css">
        <link rel = "stylesheet" href = "./style_art.css">

        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Alata&family=Noto+Sans+JP:wght@500&family=Noto+Sans+Mono:wght@500&display=swap" rel="stylesheet">

    </head>

    <body>
        <!--Global Navigation System-->
        <ul class = gNavi>
            <div class = upperNav>
                <a class = gNaviTitle  href = "https://toiniot2-wakayama.github.io/Main/">
                    <div>
                        <i class = "fa-solid fa-house"></i>&nbsp;
                        <p class = home>TOINIOT²</p>
                    </div>
                </a>

                <li>
                    <a href = #>
                        <div>
                            <i class = "fa-solid fa-screwdriver-wrench" style = "display: inline;"></i>&nbsp;
                            <p class = navTitle>Hardware</p>
                        </div>
                    </a>
                </li>

                <li>
                    <a href = #>
                        <div>
                            <i class="fa-solid fa-code" style = "display: inline;"></i>&nbsp;
                            <p class = navTitle>Program</p>
                        </div>
                    </a>
                </li>

                <li>
                    <a href = #>
                        <div>
                            <i class="fa-solid fa-comments" style = "display: inline;"></i>&nbsp;
                            <p class = navTitle>Others</p>
                        </div>
                    </a>
                </li>
            </div>
            
            <div class = lowerNav>
                <p class = followUs>Follow Us</p>

                <li>
                    <a href = https://twitter.com/toiniot2 target="_blank" rel="noopener noreferrer">
                        <div>
                            <i class="fa-brands fa-twitter" style = "display: inline;"></i>&nbsp;
                            <p class = navTitle>@toiniot2</p>
                        </div>
                    </a>
                </li>

                <li>
                    <a href = https://github.com/Toiniot2-Wakayama target="_blank" rel="noopener noreferrer">
                        <div>
                            <i class="fa-brands fa-github" style = "display: inline;"></i>&nbsp;
                            <p class = navTitle>Toiniot2-Wakayama</p>
                        </div>
                    </a>
                </li>
            </div>
        </ul>

        <!--HP Title-->
        
        <a href = "https://toiniot2-wakayama.github.io/Main/" style = "text-decoration: none;">
            <div class = title>
                TOINIOT²
            </div>
        </a>
        
        <main>
            <p class = mainTitle>定数のススメ。</p>
            <h3>Q. プログラムを書くとき、値の記録をするにはどのような手段をとるか。</h3>
            多くの場合、答えは2択です。
            <h3>A. 変数、または定数</h3>
            プログラムの中で状況によって値が変化する変数に対し、定義した以降は一切変化しない定数。どちらのほうが使いやすいのでしょうか。<br>
            この記事では、TOINIOT²のプログラム班が導き出した結論をお伝えします。<br>
            <br>
            まず初めに、それぞれの特徴を見ていきましょう。<br>
            <div class = tableContainer>
                <table>
                    <caption>変数と定数の特徴一覧表</caption>

                    <tr>
                        <th class = "tableRight tableBottom">-</th><th class = tableBottom>良い点<small>（よさそうな点）</small></th><th class = tableBottom>悪い点<small>（わるそうな点）</small></th><th class = tableBottom>参考</th>
                    </tr>

                    <tr>
                        <th class = tableRight>変数</th><td>状況に応じて任意の値に変数の<br>中身を変更することができる</td><td>値が変化するため、どの時点でどのような値が<br>入っているかを正確に捉えることが困難</td><td>-</td>
                    </tr>

                    <tr>
                        <th class = tableRight>定数</th><td>不変値として数字の代わりに使用でき、<br>定義時の値を変更し、定数を使用した部分<br>すべてが一度に変更されるため便利</td><td>値を変化させることが出来ないため、<br>任意の値を代入して好きなタイミングで<br>好きな値にすることが出来ない</td><td>定数名は基本的に<br>アルファベット<br>大文字で定義</td>
                    </tr>
                </table>
            </div><br>
            プログラム班としては、「基本的に変数を使用するが、状況に応じて定数を使用する」のがベストアンサーだと結論付けました。<br>
            （異論は認めます。とてもとても認めます。）<br>
            <br>
            プログラムの動作中に値が変化するようなものには変数を使用しますが、例えば各センサのしきい値や比例制御などのゲイン値については、あらかじめ定数として定義しておくのがいいと考えました。<br>
            また、定数の命名の一般的な規則として「定数名は大文字」というものがあります。変数名を小文字で定義することで、どれが定数でどれが変数かの見分けがつきやすいというのも、両方を使う利点ではないでしょうか。<br>
            センサのしきい値などの人の手で変更することが多い部分については、定数にしておくことでプログラムの上方に記述しておくことができ、編集の利便性も高くなると思います。<br>
            <br>
            変数ばかりを使用しており、定数の存在すらも知らない人もいるのではないでしょうか。（そう、1年前の自分です。）<br>
            変数は利便性も高く、それだけでもプログラムを完成させることは十分に可能です。しかし、センサのしきい値や制御のゲイン値などの値はおそらくプログラムの中では不変の値ではないでしょうか。変数と定数、それぞれの特徴を理解してより適切なものを使用するようにしていきたいものです。<br>
            <br>
            参考までに、私たちのプログラムの一部を載せておきます。フルのソースコードは<a href = https://github.com/Toiniot2-Wakayama/Japan-Open/blob/main/20230110_BLACK_MAIN.c  target="_blank" rel="noopener noreferrer">コチラ</a>。<br>
            <br>
            <pre>
<p class = prGray>#include</p> <p class = prRed>"D_Main.h"</p>
<p class = prGray>#include</p> <p class = prRed>"D_I2C.h"</p>
<p class = prGray>#include</p> <p class = prRed>"D_SIO.h"</p>
<p class = prGray>#include</p> <p class = prRed>"D_EIO.h"</p>

<p class = memo>ココから定数の定義</p>
<p class = prGray>#define</p> <p class = prPurple>MOTOR_MAX 85</p>
<p class = prGray>#define</p> <p class = prPurple>MOTOR_MIN 25</p>
-中略-
<p class = prGray>#define</p> <p class = prPurple>KEEPER_FRONT 10</p>
<p class = prGray>#define</p> <p class = prPurple>KEEPER_BACK_TIME 1000</p>
<p class = prGray>#define</p> <p class = prPurple>KEEPER_BACK_TIMELIMIT 5000</p>
<p class = prGray>#define</p> <p class = prPurple>DIF_LR 100</p>
<p class = prGray>#define</p> <p class = prPurple>KEEPER_BALL_FAR_MEDIUM 875</p>
<p class = prGray>#define</p> <p class = prPurple>KEEPER_BALL_MEDIUM_NEAR 1000</p>

<p class = memo>ココから変数の定義</p>
<p class = prBlue>int</p> m0;
<p class = prBlue>int</p> m1;
<p class = prBlue>int</p> m2;
<p class = prBlue>int</p> m3;
<p class = prBlue>int</p> lm0;
<p class = prBlue>int</p> lm1;
<p class = prBlue>int</p> lm2;
<p class = prBlue>int</p> lm3;
<p class = prBlue>int</p> inm0;
<p class = prBlue>int</p> inm1;
<p class = prBlue>int</p> inm2;
<p class = prBlue>int</p> inm3;
<p class = prBlue>int</p> lastMotion[6];
<p class = prBlue>int</p> motionLongFlag;
<p class = prBlue>int</p> difMotor;
<p class = prBlue>int</p> disMotor;
<p class = prBlue>int</p> backStop;
-中略-
<p class = prBlue>int</p> subFlag;

<h4 class = memo>変数と定数を組み合わせたセンサ値取得関数</h4>
<p class = prBlue>int</p> <p class = prYellow>refreshSensor</p>(<p class = prBlue>int</p> <p class = prGray>sensortype</p>, <p class = prBlue>int</p> <p class = prGray>ballfardetect</p>) {

    <p class = prPurple>switch</p> (<p class = prGray>sensortype</p>) {
    <p class = prPurple>case</p> 0:
        lowQuantity = 0;

        highIndex = 0;
        highValue = gAD[highIndex];

        <h4 class = memo>しきい値 (定数) より小さいセンサ値なら (変数に個数を記録)</h4>
        <p class = prPurple>if</p> (highValue < <p class = prPurple>BALL_LOW</p>) {
            lowQuantity += 1;
        }

        <p class = prPurple>for</p> (b = 0; b < 7; b++) {

            comparingValue = gAD[b + 1];

            <p class = prPurple>if</p> (comparingValue < <p class = prPurple>BALL_LOW</p>) {
                lowQuantity += 1;
            }

            <p class = prPurple>if</p> (comparingValue > highValue) {
                highIndex = b + 1;
                highValue = comparingValue;
            }
        }

-後略-          </pre>
            <br>
            と、長々と語ってきましたが、要するに「定数も使おうね」ってことです、ハイ。<br>
            この記事が皆さまのプログラミングに少しでも役立てばうれしいです。<br>
            <br>
            それでは、また次の機会に。
            <p class = mainDate>2023.01.24 (Tue)</p>
        </main>

        <footer>
            <p class = copyright>Copyright &copy;2022 toiniot2</p>
        </footer>

        <script src="https://kit.fontawesome.com/2cd68e5bc6.js" crossorigin="anonymous"></script>
    </body>
</html>

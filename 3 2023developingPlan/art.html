<!DOCTYPE html>
<html lang="ja">
    <head>
        <meta charset="UTF-8">
        <meta name = "viewport" content = "width = device-width, initial-scale = 1.0, user-scalable = no">
        <title>2023開発計画 | TOINIOT²</title>

        <link rel = "stylesheet" href = "https://unpkg.com/ress/dist/ress.min.css">
        <link rel = "stylesheet" href = "./style_art.css">

        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Alata&family=Noto+Sans+JP:wght@500&family=Noto+Sans+Mono:wght@500&display=swap" rel="stylesheet">

    </head>

    <body>
        <!--Global Navigation System-->
        <ul class = gNavi>
            <div class = upperNav>
                <a class = gNaviTitle  href = "https://toiniot2-wakayama.github.io/Main/">
                    <div>
                        <i class = "fa-solid fa-house"></i>&nbsp;
                        <p class = home>TOINIOT²</p>
                    </div>
                </a>

                <li>
                    <a href = #>
                        <div>
                            <i class = "fa-solid fa-screwdriver-wrench" style = "display: inline;"></i>&nbsp;
                            <p class = navTitle>Hardware</p>
                        </div>
                    </a>
                </li>

                <li>
                    <a href = #>
                        <div>
                            <i class="fa-solid fa-code" style = "display: inline;"></i>&nbsp;
                            <p class = navTitle>Program</p>
                        </div>
                    </a>
                </li>

                <li>
                    <a href = #>
                        <div>
                            <i class="fa-solid fa-comments" style = "display: inline;"></i>&nbsp;
                            <p class = navTitle>Others</p>
                        </div>
                    </a>
                </li>
            </div>
            
            <div class = lowerNav>
                <p class = followUs>Follow Us</p>

                <li>
                    <a href = https://twitter.com/toiniot2 target="_blank" rel="noopener noreferrer">
                        <div>
                            <i class="fa-brands fa-twitter" style = "display: inline;"></i>&nbsp;
                            <p class = navTitle>@toiniot2</p>
                        </div>
                    </a>
                </li>

                <li>
                    <a href = https://github.com/Toiniot2-Wakayama target="_blank" rel="noopener noreferrer">
                        <div>
                            <i class="fa-brands fa-github" style = "display: inline;"></i>&nbsp;
                            <p class = navTitle>Toiniot2-Wakayama</p>
                        </div>
                    </a>
                </li>
            </div>
        </ul>

        <!--HP Title-->
        
        <a href = "https://toiniot2-wakayama.github.io/Main/" style = "text-decoration: none;">
            <div class = title>
                TOINIOT²
            </div>
        </a>
        
        <main>
            <p class = mainTitle>2023&nbsp;開発計画</p>
            <h3>来年こそ。</h3>
            Twitterのプロフィールにもある言葉です。（2023.03.28 20:29時点&nbsp;&nbsp;&nbsp;コラ、ソコ! コロコロ変わるとかイワナイデ!）<br>
            2022年度、私たちTOINIOT²は関西ブロック大会で4位という結果に終わり、全国大会への切符をつかむことが出来ませんでした。<br>
            （関西大会でラウンドがひとつ消えてしまったとはいえ...ね?）<br>
            <h3>ではどうするのか。</h3>
            2022年度のロボットをレビューするとともに、次の大会ではどのような機体にしたいか、そしてしなければならないのか。
            <h4>ただ「好き」だけでは進まないロボット制作。</h4>
            「負け」という過去を見つめつつ、「未来」に向けて。&nbsp;私たちは、動き出します。<br><br>
            この記事では、TOINIOT²の2023年度の開発計画をお伝えします。<br>
            <br>
            <br>
            <div style="width: 90%; display: flex; margin-left: auto; margin-right: auto; border: 2px solid #413936;"></div>
            <br>
            <br>
            <div id = "container1">
                <img src = "./img1.jpg" id = "img1" style="width:60%; display:flex;">
                <div id = "table1" style="display: flex; flex-direction: column; align-items: stretch; justify-content: left; gap: 0;">
                    <p>
                        まずはお写真とスペック表から。<br>
                    </p>
                    <table>
                        <tr>
                            <th class = tableBottom>部品名&emsp;&emsp;&emsp;&emsp;&emsp;</th><th class = tableBottom>型番&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;</th>
                        </tr>
    
                        <tr>
                            <td style="text-align:left">マイコン</td><td style="text-align:left">DSR1201</td>
                        </tr>

                        <tr>
                            <td style="text-align:left">ボールセンサ</td><td style="text-align:left">DSR1204</td>
                        </tr>

                        <tr>
                            <td style="text-align:left">ラインセンサ</td><td style="text-align:left">NJL7502L</td>
                        </tr>

                        <tr>
                            <td style="text-align:left">地磁気センサ</td><td style="text-align:left">DSR1603</td>
                        </tr>

                        <tr>
                            <td style="text-align:left">モーター</td><td style="text-align:left">Pololu 25D 20.4:1</td>
                        </tr>

                        <tr>
                            <td style="text-align:left">モータードライバ</td><td style="text-align:left">DSR631</td>
                        </tr>

                        <tr>
                            <td style="text-align:left">バッテリー</td><td style="text-align:left">Melasta 9.6V Ni-MH</td>
                        </tr>

                        <tr>
                            <td style="text-align:left">DCDCコンバータ</td><td style="text-align:left">OKL-T/6-W12N-C</td>
                        </tr>
                    </table>
                </div>
            </div>
            <img src = "./img1.jpg" id = "img1-2">
            <div id = "table1-2">
                <p>
                    まずはお写真とスペック表から。<br>
                </p>
                <table style="margin-top: 0;">
                    <tr>
                        <th class = tableBottom>部品名&emsp;&emsp;&emsp;&emsp;&emsp;</th><th class = tableBottom>型番&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;</th>
                    </tr>

                    <tr>
                        <td style="text-align:left">マイコン</td><td style="text-align:left">DSR1201</td>
                    </tr>

                    <tr>
                        <td style="text-align:left">ボールセンサ</td><td style="text-align:left">DSR1204</td>
                    </tr>

                    <tr>
                        <td style="text-align:left">ラインセンサ</td><td style="text-align:left">NJL7502L</td>
                    </tr>

                    <tr>
                        <td style="text-align:left">地磁気センサ</td><td style="text-align:left">DSR1603</td>
                    </tr>

                    <tr>
                        <td style="text-align:left">モーター</td><td style="text-align:left">Pololu 25D 20.4:1</td>
                    </tr>

                    <tr>
                        <td style="text-align:left">モータードライバ</td><td style="text-align:left">DSR631</td>
                    </tr>

                    <tr>
                        <td style="text-align:left">バッテリー</td><td style="text-align:left">Melasta 9.6V Ni-MH</td>
                    </tr>

                    <tr>
                        <td style="text-align:left">DCDCコンバータ</td><td style="text-align:left">OKL-T/6-W12N-C</td>
                    </tr>
                </table>
            </div>
            <br>
            <h3>マイコン | TJ3BCore</h3>
            マイコンにはダイセンのTJ3BCoreを使用しています。学校の部活動でよく使用しているDaisen製のマイコンです。<br>
            先輩が使っていたという理由で選んだので、詳細な処理速度などのスペックは知らないです。（マイコンをもっとちゃんと選んでおけば良かった...）<br><br>
            TJ3BCoreを使用しているので、開発環境はおのずと絞られます。私たちは、Daisen社純正のC-Style for TJ3Bでプログラムを組んでいます。このアプリはブロックでもC言語でも組むことができるので、基本的には幅広い難易度に対応していると言えます。<br>
            しかし、TJ3BなどのDaisen社製のセンサやモータードライバ以外との相性は悪く、Arduino開発環境に揃っているたくさんのライブラリのようなものがないです。なので、自分でライブラリ等を記述しなければならず、このマイコン・開発環境を使うということは、ロボットの製作方針がかなり狭まるということになってしまうことに繋がります。<br>
            （TJ3BCoreが悪いってわけじゃないヨ。ロボットはじめたての河童にはちょうどいい感じの難易度だと思うヨ）<br>
            <a href = "./img2.JPG">ノリでつくったTJ3BCoreの3Dモデル。供養させてね。</a><br>
            ちなみに、今回使用したマイコンボードはKiCadで自作した基盤にICソケットなどをはんだ付けして使用しました。既製品のTJ3BCore1枚の大きさにマイコン2つ分を詰め込みました。JLCPCBさん（<a href = https://jlcpcb.com/JPV target="_blank" rel="noopener noreferrer">https://jlcpcb.com/JPV</a>）ありがとうございました。
            <br>
            <br>

            <h3>ボールセンサ | シングルパルスボールセンサ</h3>
            3Dプリンタで製造した3段目の板に8コ取り付けています。このボールセンサとマイコンとの間でデータをやり取りする配線が8コすべてバラバラなので、マイコン周りの配線が大変なことに...。<br>
            来年度は、フラットケーブルとかを使って配線の総量を減らしていきたいですね。<br><br>
            マイコン側では値をアナログで取得しています。TJ3BCoreで&nbsp;<code style="font-family:'Courier New', Courier, monospace; font-weight: bold;">sin()</code>&nbsp;<code style="font-family:'Courier New', Courier, monospace; font-weight: bold;">tan()</code>&nbsp;とかが使えるかわからなかったので、ベクトル計算などは使わずに値の大きい順番やセンサ値の和などを使ってボールの角度と距離を求めています。<br>
            （何? ベクトルよくわかってないからやらなかったんだろって? ハハハ。そういうことは黙っておくものだよ、いいね?）<br><br>
            モジュール化されているセンサを使うのは楽ですが、大きさ的に16コ積んで正確な値を出すことが出来ない感じなので、次の機体では自作したいです。<br>
            <br>

            <h3>ラインセンサ | NJL7502L</h3>
            ラインセンサは、T字型のものを4つ別々に取り付けています。センサ素子自体はそれぞれに6~8コついているのですが、センサ値自体はそれらを並列回路に繋いでいるので4種類のみです。<br>
            LEDにはOSWT3166Bを使用しています。LED用の抵抗として75Ωを使いましたが、あらためて考えてみると電流消費がバカにならないので、おとなしく330Ωとかで良かった気もします。<br><br>
            一応、可変抵抗（ポテンショメータ）でセンサの感度を変えられるようにはしましたが、よくよく考えるとアナログで値を読んでいるので別に可変抵抗じゃなくても良かった気もしますね。<br>
            あとから All_outlookさん のブログ（<a href = "https://rcj-lightweight.hateblo.jp/entry/2022keihannna">https://rcj-lightweight.hateblo.jp/entry/2022keihannna</a>）を拝見して「なるほど確かに」となったのを覚えています。<br><br>
            T字型にしたのも、先輩の機体がT字型を採用していたからなので、深い意味はないです。思考放棄、ダメ、ゼッタイ。
            <br>
            <br>

            <h3>地磁気センサ | 9Dコンパス</h3>
            <div id = compass>
                <img src = "./img3.JPG">
                <div>
                    <h2>お巡りさん、こいつです!</h2><br>
                    私たちのチームは、カメラを使わず、攻め方向を地磁気のみで測定してきました。<br>
                    スタートボタンが押され、プログラムが実行され始めた時の地磁気を攻め方向としてロボットのプログラムを書いていました。<br>
                    しかし、今回の2023名古屋大会で、同じ地磁気センサを使用しているチームのプレゼンテーションシートを見つけました。そのプレゼンシートには、驚愕の事実が書かれていたのです。<br>
                    それは、この9Dコンパスモジュールの使用している素子が「絶対方位」を測定するものだったということです。「絶対方位」とは、地球の北極をN極、南極をS極とする方位のことです。<br>
                    一方私たちのチームがやっていたのは「相対方位」を利用としていました。ロボットの動き始めはちゃんと動いてくれるのは、その動きを"キャリブレーション"と思っていたみたいですね、悲しい。
                </div>
                </div>
            
            <br>
            <br>

            <h3>モーター | Pololu 25D 20.4:1 12V</h3>
            なんというか...ハイ。可もなく不可もなく、って感じですね。<br>
            パワーが出るのはうれしいんですけど、出力を低くしたときに応答性が悪いのが難点ですね。私たちのチームのモーターは大体20%前後で動かなくなりました。これに関しては、モーター選定の時点である程度分かってはいたんですけど、やっぱり実際に使ってみると応答性が悪いことを再確認した感じです。<br>
            正直、おすすめのモーターを聞かれても名前は出てこないと思います。<br><br>
            Maxonなら違ったのかなぁ。（違っても買えません）
            <br>
            <br>

            <h3>モータードライバ | 6chモータードライバー</h3>
            危険。それに尽きます。<br><br>
            本来、Pololuの12V HPモーターのストール時の消費電流は6Aほどです。しかし、このモタドラは1チャンネル当たり最大で2Aまでしか出すことができません。また、モーターとドライバの間の配線もXHコネクタを使用していたので、最大でも3Aほどまでしか流してはいけないモノでした。<br>
            しかし、私たちのチームでは「電流? 何それおいしいの?」の考えのもとで設計を進めてきた（嘘です知らなかったんです）ので、そんなものを考えないで設計をすすめてきました。もちろん、こんな絶対最大定格を無視した使い方だと事故は起こります。<br><br>
            事件は、関西ブロック大会で起こりました。ふと焦げ臭いにおいを感じ、後ろを振り向くと...&nbsp;後輩のロボットから白煙が!<br>
            原因は大電流が流れたことで配線の被覆が熱でやられて溶けたことでした。<br><br>
            この事故をきっかけに、私たちのチーム、そして所属する科学部では電流対策をしっかりと考えることになりました。現在では、最大定格と推奨定格、ヒューズなどの安全装置を組み合わせ、高い安全性を獲得している（ハズ）なのです。
            <br>
            <br>

            <h3>バッテリー | Melasta 9.6V ニッケル水素電池</h3>
            RCJのバッテリーの基準は結構厳しめ（だと思う）ので、リチウムイオン、Li-Po、Li-Feとかは全部電池のチェックを受けなければならないらしいです。<br>
            その検査をニッケル水素は受けなくていいので、車検が早く終わって楽です。（準備が面倒くさかったわけではない。絶対に。）<br>
            ただ、このバッテリーはサイズが大きく重量もかなりあるので、ライトウェイト向きの電池ではないと思いますね。<br>
            ニッケル水素電池なら単3サイズの充電池（eneloopとか）でもいいんですけど、電池ボックスのサイズとかも考えなければならないので、その点、考えることが少ないこの電池は楽といえば楽なのかもしれないです。
            <br>
            <br>

            <h3>DCDCコンバータ | 村田製作所製 OKL-T/6-W12N-C</h3>
            正直このDCDCコンバーターじゃなくても大丈夫だと思います。<br>
            私たちのチームで使用しているTJ3BCoreは5V電源駆動なので、電池から流れてくる9.6Vをコンバーターで5Vまで落としてからマイコンに供給しています。<br>
            秋月電子（イツモオセワニナッテオリマス）で他の5V出力のDCDCコンバータを探してみたところ、<a href = "https://akizukidenshi.com/catalog/g/gM-13536/">コンナモノ</a>が見つかりました。<br>
            
            <br>
            <br>
            こんなよわよわな機体ですが、参考になればうれしいです。<br>
            最後に、機体の3Dデータを載せておきます。ヨケレバツカッテネ。<br><br>
            <div id = "frame1">
                <iframe id = "iframe1" src="https://gmail1205902.autodesk360.com/shares/public/SHd38bfQT1fb47330c9906b108b085d80b59?mode=embed" width="100%" height="768" allowfullscreen="true" webkitallowfullscreen="true" mozallowfullscreen="true"  frameborder="0"></iframe>
            </div>
            <div>
                <iframe id = "iframe2" src="https://gmail1205902.autodesk360.com/shares/public/SHd38bfQT1fb47330c9906b108b085d80b59?mode=embed" width="100%" height="250" allowfullscreen="true" webkitallowfullscreen="true" mozallowfullscreen="true"  frameborder="0"></iframe>
            </div>
            <br>
            それでは、また次の機会に。
            <p class = mainDate>2023.03.29 (Wed)</p>
        </main>

        <footer>
            <p class = copyright>Copyright &copy;2022 toiniot2</p>
        </footer>

        <script src="https://kit.fontawesome.com/2cd68e5bc6.js" crossorigin="anonymous"></script>
    </body>
</html>